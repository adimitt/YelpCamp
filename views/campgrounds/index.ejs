<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/styledsheets/app.css">

<div id="cluster-map"></div>

<h1>Total Campgrounds</h1>
<div>
  <h3><a href="/campgrounds/new">Add New</a></h3>
</div>
<%for(camp of camps){%>
<div class="card mb-3">
  <div class="row">
    <div class="col-md-4">
      <%if(camp.images.length){%>
      <img crossorigin="anonymous" src="<%=camp.images[0].url%>" alt="" class="img-fluid">
      <%}else{%>
      <img crossorigin="anonymous" class="img-fluid" alt="" src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png">
      <%}%>

    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title"><%=camp.title%></h5>
      <p class="card-text"><%=camp.description%></p>
      <p class="card-text">
        <small class="text-muted"><%=camp.location%></small>
      </p>
      <a href="/campgrounds/<%=camp._id%>" class="btn btn-primary"> View <%=camp.title%></a>
    </div>
  </div>
</div>
</div>
<%}%>

<script>
  const mapToken = '<%-process.env.MAPTILE_TOKEN%>';
const campgrounds = {features:<%-JSON.stringify(camps)%>}
</script>

<script src="/javascript/clusterMaps.js"></script>